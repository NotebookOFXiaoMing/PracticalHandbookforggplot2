<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 R语言ggplot2折线图 | R语言ggplot2科研数据可视化实用手册</title>
  <meta name="description" content="Chapter 6 R语言ggplot2折线图 | R语言ggplot2科研数据可视化实用手册" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 R语言ggplot2折线图 | R语言ggplot2科研数据可视化实用手册" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 R语言ggplot2折线图 | R语言ggplot2科研数据可视化实用手册" />
  
  
  

<meta name="author" content="闫明" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r语言ggplot2箱线图.html"/>
<link rel="next" href="r语言ggplot2饼状图.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">xiaoming</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> R语言、Rstudio、R包ggplot2安装 (win10)</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#r语言官网"><i class="fa fa-check"></i><b>1.1</b> R语言官网</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#rstudio官网"><i class="fa fa-check"></i><b>1.2</b> Rstudio官网</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="绘图数据准备.html"><a href="绘图数据准备.html"><i class="fa fa-check"></i><b>2</b> 绘图数据准备</a>
<ul>
<li class="chapter" data-level="2.1" data-path="绘图数据准备.html"><a href="绘图数据准备.html#文件的路径"><i class="fa fa-check"></i><b>2.1</b> 文件的路径</a></li>
<li class="chapter" data-level="2.2" data-path="绘图数据准备.html"><a href="绘图数据准备.html#读取数据"><i class="fa fa-check"></i><b>2.2</b> 读取数据</a></li>
<li class="chapter" data-level="2.3" data-path="绘图数据准备.html"><a href="绘图数据准备.html#读取数据集以后对数据集进行操作"><i class="fa fa-check"></i><b>2.3</b> 读取数据集以后对数据集进行操作</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r语言ggplot2散点图.html"><a href="r语言ggplot2散点图.html"><i class="fa fa-check"></i><b>3</b> R语言ggplot2散点图</a></li>
<li class="chapter" data-level="4" data-path="r语言ggplot2柱形图.html"><a href="r语言ggplot2柱形图.html"><i class="fa fa-check"></i><b>4</b> R语言ggplot2柱形图</a>
<ul>
<li class="chapter" data-level="4.1" data-path="r语言ggplot2柱形图.html"><a href="r语言ggplot2柱形图.html#最基本的柱形图需要准备的数据"><i class="fa fa-check"></i><b>4.1</b> 最基本的柱形图需要准备的数据</a></li>
<li class="chapter" data-level="4.2" data-path="r语言ggplot2柱形图.html"><a href="r语言ggplot2柱形图.html#簇状柱形图"><i class="fa fa-check"></i><b>4.2</b> 簇状柱形图</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="r语言ggplot2柱形图.html"><a href="r语言ggplot2柱形图.html#接下来看每周一图里面的例子"><i class="fa fa-check"></i><b>4.2.1</b> 接下来看每周一图里面的例子</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="r语言ggplot2柱形图.html"><a href="r语言ggplot2柱形图.html#堆积柱形图"><i class="fa fa-check"></i><b>4.3</b> 堆积柱形图</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="r语言ggplot2柱形图.html"><a href="r语言ggplot2柱形图.html#实际例子"><i class="fa fa-check"></i><b>4.3.1</b> 实际例子</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r语言ggplot2箱线图.html"><a href="r语言ggplot2箱线图.html"><i class="fa fa-check"></i><b>5</b> R语言ggplot2箱线图</a>
<ul>
<li class="chapter" data-level="5.1" data-path="r语言ggplot2箱线图.html"><a href="r语言ggplot2箱线图.html#首先是箱线图"><i class="fa fa-check"></i><b>5.1</b> 首先是箱线图</a></li>
<li class="chapter" data-level="5.2" data-path="r语言ggplot2箱线图.html"><a href="r语言ggplot2箱线图.html#接下来是带有分组的箱线图"><i class="fa fa-check"></i><b>5.2</b> 接下来是带有分组的箱线图</a></li>
<li class="chapter" data-level="5.3" data-path="r语言ggplot2箱线图.html"><a href="r语言ggplot2箱线图.html#接下来是小提琴图"><i class="fa fa-check"></i><b>5.3</b> 接下来是小提琴图</a></li>
<li class="chapter" data-level="5.4" data-path="r语言ggplot2箱线图.html"><a href="r语言ggplot2箱线图.html#类似于箱线图小提琴图的还有"><i class="fa fa-check"></i><b>5.4</b> 类似于箱线图/小提琴图的还有</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="r语言ggplot2折线图.html"><a href="r语言ggplot2折线图.html"><i class="fa fa-check"></i><b>6</b> R语言ggplot2折线图</a>
<ul>
<li class="chapter" data-level="6.1" data-path="r语言ggplot2折线图.html"><a href="r语言ggplot2折线图.html#最基本的折线图"><i class="fa fa-check"></i><b>6.1</b> 最基本的折线图</a></li>
<li class="chapter" data-level="6.2" data-path="r语言ggplot2折线图.html"><a href="r语言ggplot2折线图.html#分组的折线图"><i class="fa fa-check"></i><b>6.2</b> 分组的折线图</a></li>
<li class="chapter" data-level="6.3" data-path="r语言ggplot2折线图.html"><a href="r语言ggplot2折线图.html#添加线段"><i class="fa fa-check"></i><b>6.3</b> 添加线段</a></li>
<li class="chapter" data-level="6.4" data-path="r语言ggplot2折线图.html"><a href="r语言ggplot2折线图.html#添加辅助线"><i class="fa fa-check"></i><b>6.4</b> 添加辅助线</a></li>
<li class="chapter" data-level="6.5" data-path="r语言ggplot2折线图.html"><a href="r语言ggplot2折线图.html#面积图"><i class="fa fa-check"></i><b>6.5</b> 面积图</a></li>
<li class="chapter" data-level="6.6" data-path="r语言ggplot2折线图.html"><a href="r语言ggplot2折线图.html#实际例子-1"><i class="fa fa-check"></i><b>6.6</b> 实际例子</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r语言ggplot2饼状图.html"><a href="r语言ggplot2饼状图.html"><i class="fa fa-check"></i><b>7</b> R语言ggplot2饼状图</a>
<ul>
<li class="chapter" data-level="7.1" data-path="r语言ggplot2饼状图.html"><a href="r语言ggplot2饼状图.html#最基本的饼状图"><i class="fa fa-check"></i><b>7.1</b> 最基本的饼状图</a></li>
<li class="chapter" data-level="7.2" data-path="r语言ggplot2饼状图.html"><a href="r语言ggplot2饼状图.html#中间空心的饼状图"><i class="fa fa-check"></i><b>7.2</b> 中间空心的饼状图</a></li>
<li class="chapter" data-level="7.3" data-path="r语言ggplot2饼状图.html"><a href="r语言ggplot2饼状图.html#其他效果的饼状图"><i class="fa fa-check"></i><b>7.3</b> 其他效果的饼状图</a></li>
<li class="chapter" data-level="7.4" data-path="r语言ggplot2饼状图.html"><a href="r语言ggplot2饼状图.html#其中某一块可以离开的饼图"><i class="fa fa-check"></i><b>7.4</b> 其中某一块可以离开的饼图</a></li>
<li class="chapter" data-level="7.5" data-path="r语言ggplot2饼状图.html"><a href="r语言ggplot2饼状图.html#多层嵌套的饼状图"><i class="fa fa-check"></i><b>7.5</b> 多层嵌套的饼状图</a></li>
<li class="chapter" data-level="7.6" data-path="r语言ggplot2饼状图.html"><a href="r语言ggplot2饼状图.html#一次性画很多个饼状图"><i class="fa fa-check"></i><b>7.6</b> 一次性画很多个饼状图</a></li>
<li class="chapter" data-level="7.7" data-path="r语言ggplot2饼状图.html"><a href="r语言ggplot2饼状图.html#饼状图的两个实例"><i class="fa fa-check"></i><b>7.7</b> 饼状图的两个实例</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="r语言ggplot2热图.html"><a href="r语言ggplot2热图.html"><i class="fa fa-check"></i><b>8</b> R语言ggplot2热图</a>
<ul>
<li class="chapter" data-level="8.1" data-path="r语言ggplot2热图.html"><a href="r语言ggplot2热图.html#pheatmap热图"><i class="fa fa-check"></i><b>8.1</b> pheatmap热图</a></li>
<li class="chapter" data-level="8.2" data-path="r语言ggplot2热图.html"><a href="r语言ggplot2热图.html#ggplot2热图"><i class="fa fa-check"></i><b>8.2</b> ggplot2热图</a></li>
<li class="chapter" data-level="8.3" data-path="r语言ggplot2热图.html"><a href="r语言ggplot2热图.html#ggplot2气泡热图图"><i class="fa fa-check"></i><b>8.3</b> ggplot2气泡热图图</a></li>
<li class="chapter" data-level="8.4" data-path="r语言ggplot2热图.html"><a href="r语言ggplot2热图.html#一个完整的例子"><i class="fa fa-check"></i><b>8.4</b> 一个完整的例子</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="r语言韦恩图.html"><a href="r语言韦恩图.html"><i class="fa fa-check"></i><b>9</b> R语言韦恩图</a></li>
<li class="chapter" data-level="10" data-path="r语言ggtree树状图.html"><a href="r语言ggtree树状图.html"><i class="fa fa-check"></i><b>10</b> R语言ggtree树状图</a>
<ul>
<li class="chapter" data-level="10.1" data-path="r语言ggtree树状图.html"><a href="r语言ggtree树状图.html#进化树"><i class="fa fa-check"></i><b>10.1</b> 进化树</a></li>
<li class="chapter" data-level="10.2" data-path="r语言ggtree树状图.html"><a href="r语言ggtree树状图.html#ggtreeextra添加额外注释信息"><i class="fa fa-check"></i><b>10.2</b> ggtreeExtra添加额外注释信息</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R语言ggplot2科研数据可视化实用手册</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r语言ggplot2折线图" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> R语言ggplot2折线图</h1>
<p>这一章主要介绍R语言ggplot2画线的函数，我能想到的有</p>
<ul>
<li><p>geom_line()</p></li>
<li><p>geom_path()</p></li>
<li><p>geom_vline()</p></li>
<li><p>geom_hline()</p></li>
<li><p>geom_abline()</p></li>
<li><p>geom_curve()</p></li>
<li><p>geom_segment()</p></li>
<li><p>geom_area() 面积图也可以看成是折线图的一种吧</p></li>
<li><p>geom_ribbon()</p></li>
</ul>
<div id="最基本的折线图" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> 最基本的折线图</h2>
<p>准备数据 一列x和一列y,这里根据x是离散型数据还是连续型数据分为两种情况，</p>
<p>当x是连续型数据的时候</p>
<p><img src="img/06-lineplot/001.png"></p>
<p>作图代码</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="r语言ggplot2折线图.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb132-2"><a href="r语言ggplot2折线图.html#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb132-3"><a href="r语言ggplot2折线图.html#cb132-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-4"><a href="r语言ggplot2折线图.html#cb132-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat01.xlsx&quot;</span>)</span>
<span id="cb132-5"><a href="r语言ggplot2折线图.html#cb132-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-6"><a href="r语言ggplot2折线图.html#cb132-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb132-7"><a href="r语言ggplot2折线图.html#cb132-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-171-1.png" width="672" /></p>
<p>线可以修改参数通常有</p>
<ul>
<li><p>颜色 color</p></li>
<li><p>粗细 size</p></li>
<li><p>线型 lty 线型的种类可以参考这个链接 <a href="http://www.sthda.com/english/wiki/ggplot2-line-types-how-to-change-line-types-of-a-graph-in-r-software" class="uri">http://www.sthda.com/english/wiki/ggplot2-line-types-how-to-change-line-types-of-a-graph-in-r-software</a></p></li>
</ul>
<p>比如</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="r语言ggplot2折线图.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb133-2"><a href="r语言ggplot2折线图.html#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb133-3"><a href="r语言ggplot2折线图.html#cb133-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-4"><a href="r语言ggplot2折线图.html#cb133-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat01.xlsx&quot;</span>)</span>
<span id="cb133-5"><a href="r语言ggplot2折线图.html#cb133-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-6"><a href="r语言ggplot2折线图.html#cb133-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb133-7"><a href="r语言ggplot2折线图.html#cb133-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">&quot;red&quot;</span>,<span class="at">size=</span><span class="dv">5</span>,<span class="at">lty=</span><span class="st">&quot;dashed&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-172-1.png" width="672" /></p>
<p>这里我们看到x轴的刻度不是按照1到10这样截断的，如果要修改的话需要用到scale_x_continues()函数</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="r语言ggplot2折线图.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb134-2"><a href="r语言ggplot2折线图.html#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb134-3"><a href="r语言ggplot2折线图.html#cb134-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-4"><a href="r语言ggplot2折线图.html#cb134-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat01.xlsx&quot;</span>)</span>
<span id="cb134-5"><a href="r语言ggplot2折线图.html#cb134-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-6"><a href="r语言ggplot2折线图.html#cb134-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb134-7"><a href="r语言ggplot2折线图.html#cb134-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">&quot;red&quot;</span>,<span class="at">size=</span><span class="dv">5</span>,<span class="at">lty=</span><span class="st">&quot;dashed&quot;</span>)<span class="sc">+</span></span>
<span id="cb134-8"><a href="r语言ggplot2折线图.html#cb134-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-173-1.png" width="672" /></p>
<p>如果想要把散点也加上的话可以继续叠加geom_point()函数</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="r语言ggplot2折线图.html#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb135-2"><a href="r语言ggplot2折线图.html#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb135-3"><a href="r语言ggplot2折线图.html#cb135-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-4"><a href="r语言ggplot2折线图.html#cb135-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat01.xlsx&quot;</span>)</span>
<span id="cb135-5"><a href="r语言ggplot2折线图.html#cb135-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-6"><a href="r语言ggplot2折线图.html#cb135-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb135-7"><a href="r语言ggplot2折线图.html#cb135-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb135-8"><a href="r语言ggplot2折线图.html#cb135-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-174-1.png" width="672" /></p>
<p>折线图还有一个比较常用的操作是添加误差线，添加误差线的函数是geom_errorbar(),假设我们已经提前算好数据整理到excel里,整理的数据如下</p>
<p><img src="img/06-lineplot/002.png"></p>
<p>作图代码</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="r语言ggplot2折线图.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb136-2"><a href="r语言ggplot2折线图.html#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb136-3"><a href="r语言ggplot2折线图.html#cb136-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-4"><a href="r语言ggplot2折线图.html#cb136-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat02.xlsx&quot;</span>)</span>
<span id="cb136-5"><a href="r语言ggplot2折线图.html#cb136-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-6"><a href="r语言ggplot2折线图.html#cb136-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb136-7"><a href="r语言ggplot2折线图.html#cb136-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb136-8"><a href="r语言ggplot2折线图.html#cb136-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb136-9"><a href="r语言ggplot2折线图.html#cb136-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>var2<span class="sc">-</span>sd_value,</span>
<span id="cb136-10"><a href="r语言ggplot2折线图.html#cb136-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ymax=</span>var2<span class="sc">+</span>sd_value),</span>
<span id="cb136-11"><a href="r语言ggplot2折线图.html#cb136-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">width=</span><span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-175-1.png" width="672" /></p>
<p>有时候可能还需要添加置信区间，添加置信区间的用geom_ribbon()函数，还是提前算好置信区间，数据集整理格式如下</p>
<p><img src="img/06-lineplot/002-1.png"></p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="r语言ggplot2折线图.html#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb137-2"><a href="r语言ggplot2折线图.html#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb137-3"><a href="r语言ggplot2折线图.html#cb137-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-4"><a href="r语言ggplot2折线图.html#cb137-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat02_1.xlsx&quot;</span>)</span>
<span id="cb137-5"><a href="r语言ggplot2折线图.html#cb137-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-6"><a href="r语言ggplot2折线图.html#cb137-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb137-7"><a href="r语言ggplot2折线图.html#cb137-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb137-8"><a href="r语言ggplot2折线图.html#cb137-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb137-9"><a href="r语言ggplot2折线图.html#cb137-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">ymin=</span>lower95,<span class="at">ymax=</span>upper95),</span>
<span id="cb137-10"><a href="r语言ggplot2折线图.html#cb137-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">fill=</span><span class="st">&quot;red&quot;</span>,<span class="at">alpha=</span><span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-176-1.png" width="672" /></p>
<p>以上是x轴是连续型数据的情况，接下来介绍x轴是离散型数据的情况</p>
<p><img src="img/06-lineplot/003.png"></p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="r语言ggplot2折线图.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb138-2"><a href="r语言ggplot2折线图.html#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb138-3"><a href="r语言ggplot2折线图.html#cb138-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-4"><a href="r语言ggplot2折线图.html#cb138-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat03.xlsx&quot;</span>)</span>
<span id="cb138-5"><a href="r语言ggplot2折线图.html#cb138-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-6"><a href="r语言ggplot2折线图.html#cb138-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb138-7"><a href="r语言ggplot2折线图.html#cb138-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb138-8"><a href="r语言ggplot2折线图.html#cb138-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<pre><code>## geom_path: Each group consists of only one observation. Do you need to adjust the group
## aesthetic?</code></pre>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-177-1.png" width="672" /></p>
<p>以上代码画不出来线，离散型数据还需要我们指定一个group=1参数</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="r语言ggplot2折线图.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb140-2"><a href="r语言ggplot2折线图.html#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb140-3"><a href="r语言ggplot2折线图.html#cb140-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-4"><a href="r语言ggplot2折线图.html#cb140-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat03.xlsx&quot;</span>)</span>
<span id="cb140-5"><a href="r语言ggplot2折线图.html#cb140-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-6"><a href="r语言ggplot2折线图.html#cb140-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2,<span class="at">group=</span><span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb140-7"><a href="r语言ggplot2折线图.html#cb140-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb140-8"><a href="r语言ggplot2折线图.html#cb140-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-178-1.png" width="672" /></p>
<p>离散型数据比较常用的一个操作就是改变x轴的顺序，默认是按照首字母排序，如果想要按照我们自己要求的顺序来，我们给数据赋予因子水平</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="r语言ggplot2折线图.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb141-2"><a href="r语言ggplot2折线图.html#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb141-3"><a href="r语言ggplot2折线图.html#cb141-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-4"><a href="r语言ggplot2折线图.html#cb141-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat03.xlsx&quot;</span>)</span>
<span id="cb141-5"><a href="r语言ggplot2折线图.html#cb141-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-6"><a href="r语言ggplot2折线图.html#cb141-6" aria-hidden="true" tabindex="-1"></a>dat01<span class="sc">$</span>var1<span class="ot">&lt;-</span><span class="fu">factor</span>(dat01<span class="sc">$</span>var1,</span>
<span id="cb141-7"><a href="r语言ggplot2折线图.html#cb141-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;B&quot;</span>,<span class="st">&quot;D&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;E&quot;</span>))</span>
<span id="cb141-8"><a href="r语言ggplot2折线图.html#cb141-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-9"><a href="r语言ggplot2折线图.html#cb141-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2,<span class="at">group=</span><span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb141-10"><a href="r语言ggplot2折线图.html#cb141-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb141-11"><a href="r语言ggplot2折线图.html#cb141-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-179-1.png" width="672" /></p>
<p>这里需要注意的是赋予因子水平的时候levels参数后面跟的内容必须和数据里的字符完全一致，要不然会出现错误</p>
<p>以上的折线图在拐弯处都是很尖锐的，如果想要用平滑的线用ggplot2里的函数如何实现我暂时想不明白了，这里可以借助其他R包 ggbump 参考链接 <a href="https://github.com/davidsjoberg/ggbump" class="uri">https://github.com/davidsjoberg/ggbump</a> 有时间可以自己研究一下，这里暂时不做介绍</p>
</div>
<div id="分组的折线图" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> 分组的折线图</h2>
<p>分组折线图需要在 x 和 y两列数据的基础上再增加一列表示分组，示例数据如下</p>
<p><img src="img/06-lineplot/004.png"></p>
<p>作图代码</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="r语言ggplot2折线图.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb142-2"><a href="r语言ggplot2折线图.html#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb142-3"><a href="r语言ggplot2折线图.html#cb142-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-4"><a href="r语言ggplot2折线图.html#cb142-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat04.xlsx&quot;</span>)</span>
<span id="cb142-5"><a href="r语言ggplot2折线图.html#cb142-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-6"><a href="r语言ggplot2折线图.html#cb142-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2,<span class="at">group=</span>group))<span class="sc">+</span></span>
<span id="cb142-7"><a href="r语言ggplot2折线图.html#cb142-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb142-8"><a href="r语言ggplot2折线图.html#cb142-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-180-1.png" width="672" /></p>
<p>用颜色 线型来区分不同的分组</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="r语言ggplot2折线图.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb143-2"><a href="r语言ggplot2折线图.html#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb143-3"><a href="r语言ggplot2折线图.html#cb143-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-4"><a href="r语言ggplot2折线图.html#cb143-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat04.xlsx&quot;</span>)</span>
<span id="cb143-5"><a href="r语言ggplot2折线图.html#cb143-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-6"><a href="r语言ggplot2折线图.html#cb143-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2,<span class="at">group=</span>group))<span class="sc">+</span></span>
<span id="cb143-7"><a href="r语言ggplot2折线图.html#cb143-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color=</span>group,<span class="at">lty=</span>group))<span class="sc">+</span></span>
<span id="cb143-8"><a href="r语言ggplot2折线图.html#cb143-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span>group,<span class="at">shape=</span>group))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-181-1.png" width="672" /></p>
<p>分组数据添加误差线,再给数据集增加一列误差线数据</p>
<p><img src="img/06-lineplot/005.png"></p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="r语言ggplot2折线图.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb144-2"><a href="r语言ggplot2折线图.html#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb144-3"><a href="r语言ggplot2折线图.html#cb144-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-4"><a href="r语言ggplot2折线图.html#cb144-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat04_1.xlsx&quot;</span>)</span>
<span id="cb144-5"><a href="r语言ggplot2折线图.html#cb144-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-6"><a href="r语言ggplot2折线图.html#cb144-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2,<span class="at">group=</span>group))<span class="sc">+</span></span>
<span id="cb144-7"><a href="r语言ggplot2折线图.html#cb144-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color=</span>group,<span class="at">lty=</span>group))<span class="sc">+</span></span>
<span id="cb144-8"><a href="r语言ggplot2折线图.html#cb144-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span>group,<span class="at">shape=</span>group))<span class="sc">+</span></span>
<span id="cb144-9"><a href="r语言ggplot2折线图.html#cb144-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>var2<span class="sc">-</span>sd_value,</span>
<span id="cb144-10"><a href="r语言ggplot2折线图.html#cb144-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ymax=</span>var2<span class="sc">+</span>sd_value,</span>
<span id="cb144-11"><a href="r语言ggplot2折线图.html#cb144-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">color=</span>group),</span>
<span id="cb144-12"><a href="r语言ggplot2折线图.html#cb144-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">width=</span><span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-182-1.png" width="672" /></p>
<p>分组添加置信区间</p>
<p><img src="img/06-lineplot/006.png"></p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="r语言ggplot2折线图.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb145-2"><a href="r语言ggplot2折线图.html#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb145-3"><a href="r语言ggplot2折线图.html#cb145-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-4"><a href="r语言ggplot2折线图.html#cb145-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat04_2.xlsx&quot;</span>)</span>
<span id="cb145-5"><a href="r语言ggplot2折线图.html#cb145-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-6"><a href="r语言ggplot2折线图.html#cb145-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2,<span class="at">group=</span>group))<span class="sc">+</span></span>
<span id="cb145-7"><a href="r语言ggplot2折线图.html#cb145-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color=</span>group,<span class="at">lty=</span>group))<span class="sc">+</span></span>
<span id="cb145-8"><a href="r语言ggplot2折线图.html#cb145-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span>group,<span class="at">shape=</span>group))<span class="sc">+</span></span>
<span id="cb145-9"><a href="r语言ggplot2折线图.html#cb145-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">ymin=</span>lower95,<span class="at">ymax=</span>upper95,</span>
<span id="cb145-10"><a href="r语言ggplot2折线图.html#cb145-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">color=</span>group),<span class="at">alpha=</span><span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-183-1.png" width="672" /></p>
<p>接下来是自定义这些 颜色 形状 等</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="r语言ggplot2折线图.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb146-2"><a href="r语言ggplot2折线图.html#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb146-3"><a href="r语言ggplot2折线图.html#cb146-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-4"><a href="r语言ggplot2折线图.html#cb146-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat04_2.xlsx&quot;</span>)</span>
<span id="cb146-5"><a href="r语言ggplot2折线图.html#cb146-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-6"><a href="r语言ggplot2折线图.html#cb146-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2,<span class="at">group=</span>group))<span class="sc">+</span></span>
<span id="cb146-7"><a href="r语言ggplot2折线图.html#cb146-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color=</span>group,<span class="at">lty=</span>group))<span class="sc">+</span></span>
<span id="cb146-8"><a href="r语言ggplot2折线图.html#cb146-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span>group,<span class="at">shape=</span>group))<span class="sc">+</span></span>
<span id="cb146-9"><a href="r语言ggplot2折线图.html#cb146-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">ymin=</span>lower95,<span class="at">ymax=</span>upper95,</span>
<span id="cb146-10"><a href="r语言ggplot2折线图.html#cb146-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">color=</span>group),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb146-11"><a href="r语言ggplot2折线图.html#cb146-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;group_1&quot;</span><span class="ot">=</span><span class="st">&quot;blue&quot;</span>,<span class="st">&quot;group_2&quot;</span><span class="ot">=</span><span class="st">&quot;darkgreen&quot;</span>))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-184-1.png" width="672" /></p>
<p>x轴是离散数据的分组折线图,基本上和连续型的数据是一样的</p>
<p>示例数据集如下</p>
<p><img src="img/06-lineplot/007.png"></p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="r语言ggplot2折线图.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb147-2"><a href="r语言ggplot2折线图.html#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb147-3"><a href="r语言ggplot2折线图.html#cb147-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-4"><a href="r语言ggplot2折线图.html#cb147-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat05.xlsx&quot;</span>)</span>
<span id="cb147-5"><a href="r语言ggplot2折线图.html#cb147-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-6"><a href="r语言ggplot2折线图.html#cb147-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2,<span class="at">group=</span>group))<span class="sc">+</span></span>
<span id="cb147-7"><a href="r语言ggplot2折线图.html#cb147-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color=</span>group,<span class="at">lty=</span>group))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-185-1.png" width="672" /></p>
<p>折线图x轴是时间型数据，比如如下示例</p>
<p><img src="img/06-lineplot/008.png"></p>
<p>这种情况我个人建议是给数据集增加一列连续型的数据用来做x，然后再修改x轴的坐标轴标签，比如把数据集改成如下</p>
<p><img src="img/06-lineplot/009.png"></p>
<p>作图代码</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="r语言ggplot2折线图.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb148-2"><a href="r语言ggplot2折线图.html#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb148-3"><a href="r语言ggplot2折线图.html#cb148-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-4"><a href="r语言ggplot2折线图.html#cb148-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat06.xlsx&quot;</span>,</span>
<span id="cb148-5"><a href="r语言ggplot2折线图.html#cb148-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">sheet =</span> <span class="st">&quot;Sheet2&quot;</span>)</span>
<span id="cb148-6"><a href="r语言ggplot2折线图.html#cb148-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-7"><a href="r语言ggplot2折线图.html#cb148-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var3,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb148-8"><a href="r语言ggplot2折线图.html#cb148-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb148-9"><a href="r语言ggplot2折线图.html#cb148-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb148-10"><a href="r语言ggplot2折线图.html#cb148-10" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> dat01<span class="sc">$</span>var1)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-186-1.png" width="672" /></p>
<p>以上内容作图都是用到的geom_line()函数，接下来介绍geom_path()函数 参考 <a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="uri">https://ggplot2.tidyverse.org/reference/geom_path.html</a></p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="r语言ggplot2折线图.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb149-2"><a href="r语言ggplot2折线图.html#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb149-3"><a href="r语言ggplot2折线图.html#cb149-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-4"><a href="r语言ggplot2折线图.html#cb149-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat07.xlsx&quot;</span>)</span>
<span id="cb149-5"><a href="r语言ggplot2折线图.html#cb149-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-6"><a href="r语言ggplot2折线图.html#cb149-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb149-7"><a href="r语言ggplot2折线图.html#cb149-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb149-8"><a href="r语言ggplot2折线图.html#cb149-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-187-1.png" width="672" /></p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="r语言ggplot2折线图.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb150-2"><a href="r语言ggplot2折线图.html#cb150-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>()<span class="sc">+</span></span>
<span id="cb150-3"><a href="r语言ggplot2折线图.html#cb150-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-187-2.png" width="672" /></p>
<p>从上图我们可以看出来geom_line()函数是按照x数值的大小从前往后连，geom_path()函数是按照数据集出现的顺序连</p>
</div>
<div id="添加线段" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> 添加线段</h2>
<p>添加线段用到的函数是</p>
<ul>
<li><p>geom_segment() 直线</p></li>
<li><p>geom_curve() 曲线</p></li>
</ul>
<p>比如一个简单的数据集</p>
<p><img src="img/06-lineplot/010.png"></p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="r语言ggplot2折线图.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb151-2"><a href="r语言ggplot2折线图.html#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb151-3"><a href="r语言ggplot2折线图.html#cb151-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-4"><a href="r语言ggplot2折线图.html#cb151-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat08.xlsx&quot;</span>)</span>
<span id="cb151-5"><a href="r语言ggplot2折线图.html#cb151-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-6"><a href="r语言ggplot2折线图.html#cb151-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb151-7"><a href="r语言ggplot2折线图.html#cb151-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">5</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-188-1.png" width="672" /></p>
<p>在以上两个点之间添加一个线段</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="r语言ggplot2折线图.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb152-2"><a href="r语言ggplot2折线图.html#cb152-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb152-3"><a href="r语言ggplot2折线图.html#cb152-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-4"><a href="r语言ggplot2折线图.html#cb152-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat08.xlsx&quot;</span>)</span>
<span id="cb152-5"><a href="r语言ggplot2折线图.html#cb152-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-6"><a href="r语言ggplot2折线图.html#cb152-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb152-7"><a href="r语言ggplot2折线图.html#cb152-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb152-8"><a href="r语言ggplot2折线图.html#cb152-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="dv">2</span>,<span class="at">xend=</span><span class="dv">4</span>,<span class="at">y=</span><span class="dv">2</span>,<span class="at">yend=</span><span class="dv">2</span>))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-189-1.png" width="672" />
如果是曲线</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="r语言ggplot2折线图.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb153-2"><a href="r语言ggplot2折线图.html#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb153-3"><a href="r语言ggplot2折线图.html#cb153-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-4"><a href="r语言ggplot2折线图.html#cb153-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat08.xlsx&quot;</span>)</span>
<span id="cb153-5"><a href="r语言ggplot2折线图.html#cb153-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-6"><a href="r语言ggplot2折线图.html#cb153-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb153-7"><a href="r语言ggplot2折线图.html#cb153-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb153-8"><a href="r语言ggplot2折线图.html#cb153-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_curve</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="dv">2</span>,<span class="at">xend=</span><span class="dv">4</span>,<span class="at">y=</span><span class="dv">2</span>,<span class="at">yend=</span><span class="dv">2</span>))</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-190-1.png" width="672" /></p>
<p>曲线可以调节弧度,用到 curvature 参数</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="r语言ggplot2折线图.html#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb154-2"><a href="r语言ggplot2折线图.html#cb154-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb154-3"><a href="r语言ggplot2折线图.html#cb154-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-4"><a href="r语言ggplot2折线图.html#cb154-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat08.xlsx&quot;</span>)</span>
<span id="cb154-5"><a href="r语言ggplot2折线图.html#cb154-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-6"><a href="r语言ggplot2折线图.html#cb154-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb154-7"><a href="r语言ggplot2折线图.html#cb154-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb154-8"><a href="r语言ggplot2折线图.html#cb154-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_curve</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="dv">2</span>,<span class="at">xend=</span><span class="dv">4</span>,<span class="at">y=</span><span class="dv">2</span>,<span class="at">yend=</span><span class="dv">2</span>),<span class="at">curvature =</span> <span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-191-1.png" width="672" /></p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="r语言ggplot2折线图.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb155-2"><a href="r语言ggplot2折线图.html#cb155-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb155-3"><a href="r语言ggplot2折线图.html#cb155-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_curve</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="dv">2</span>,<span class="at">xend=</span><span class="dv">4</span>,<span class="at">y=</span><span class="dv">2</span>,<span class="at">yend=</span><span class="dv">2</span>),<span class="at">curvature =</span> <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-191-2.png" width="672" /></p>
<p>添加箭头的话也是用到这两个函数</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="r语言ggplot2折线图.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb156-2"><a href="r语言ggplot2折线图.html#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb156-3"><a href="r语言ggplot2折线图.html#cb156-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-4"><a href="r语言ggplot2折线图.html#cb156-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat08.xlsx&quot;</span>)</span>
<span id="cb156-5"><a href="r语言ggplot2折线图.html#cb156-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-6"><a href="r语言ggplot2折线图.html#cb156-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb156-7"><a href="r语言ggplot2折线图.html#cb156-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb156-8"><a href="r语言ggplot2折线图.html#cb156-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="dv">2</span>,<span class="at">xend=</span><span class="dv">4</span>,<span class="at">y=</span><span class="dv">2</span>,<span class="at">yend=</span><span class="dv">2</span>),</span>
<span id="cb156-9"><a href="r语言ggplot2折线图.html#cb156-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">arrow =</span> <span class="fu">arrow</span>())</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-192-1.png" width="672" /></p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="r语言ggplot2折线图.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb157-2"><a href="r语言ggplot2折线图.html#cb157-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb157-3"><a href="r语言ggplot2折线图.html#cb157-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_curve</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="dv">2</span>,<span class="at">xend=</span><span class="dv">4</span>,<span class="at">y=</span><span class="dv">2</span>,<span class="at">yend=</span><span class="dv">2</span>),<span class="at">curvature =</span> <span class="fl">0.2</span>,</span>
<span id="cb157-4"><a href="r语言ggplot2折线图.html#cb157-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">arrow =</span> <span class="fu">arrow</span>())</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-192-2.png" width="672" /></p>
</div>
<div id="添加辅助线" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> 添加辅助线</h2>
<p><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="uri">https://ggplot2.tidyverse.org/reference/geom_abline.html</a></p>
<ul>
<li><p>垂直辅助线 geom_vline() 只需要指定xintercept</p></li>
<li><p>水平辅助线 geom_hline() 只需要指定yintercept</p></li>
<li><p>带有角度的线段 geom_abline() 需要指定截距 intercept 和斜率 slope</p></li>
</ul>
<p>接下来用鸢尾花的数据集做一个演示</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="r语言ggplot2折线图.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb158-2"><a href="r语言ggplot2折线图.html#cb158-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-3"><a href="r语言ggplot2折线图.html#cb158-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="r语言ggplot2折线图.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>iris,<span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length,<span class="at">y=</span>Sepal.Width))<span class="sc">+</span></span>
<span id="cb160-2"><a href="r语言ggplot2折线图.html#cb160-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb160-3"><a href="r语言ggplot2折线图.html#cb160-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">6</span>,<span class="at">size=</span><span class="dv">1</span>,<span class="at">lty=</span><span class="st">&quot;solid&quot;</span>,<span class="at">color=</span><span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-193-1.png" width="672" /></p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="r语言ggplot2折线图.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>iris,<span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length,<span class="at">y=</span>Sepal.Width))<span class="sc">+</span></span>
<span id="cb161-2"><a href="r语言ggplot2折线图.html#cb161-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb161-3"><a href="r语言ggplot2折线图.html#cb161-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">3</span>,<span class="at">size=</span><span class="dv">1</span>,<span class="at">lty=</span><span class="st">&quot;solid&quot;</span>,<span class="at">color=</span><span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-193-2.png" width="672" /></p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="r语言ggplot2折线图.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>iris,<span class="fu">aes</span>(<span class="at">x=</span>Sepal.Length,</span>
<span id="cb162-2"><a href="r语言ggplot2折线图.html#cb162-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y=</span>Sepal.Width))<span class="sc">+</span></span>
<span id="cb162-3"><a href="r语言ggplot2折线图.html#cb162-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb162-4"><a href="r语言ggplot2折线图.html#cb162-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">4</span>,</span>
<span id="cb162-5"><a href="r语言ggplot2折线图.html#cb162-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">slope =</span><span class="sc">-</span><span class="fl">0.2</span> ,</span>
<span id="cb162-6"><a href="r语言ggplot2折线图.html#cb162-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">size=</span><span class="dv">1</span>,</span>
<span id="cb162-7"><a href="r语言ggplot2折线图.html#cb162-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">lty=</span><span class="st">&quot;solid&quot;</span>,<span class="at">color=</span><span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-193-3.png" width="672" /></p>
</div>
<div id="面积图" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> 面积图</h2>
<p>用最基本的折线图数据做一个演示</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="r语言ggplot2折线图.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb163-2"><a href="r语言ggplot2折线图.html#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb163-3"><a href="r语言ggplot2折线图.html#cb163-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-4"><a href="r语言ggplot2折线图.html#cb163-4" aria-hidden="true" tabindex="-1"></a>dat01<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;example_data/06-lineplot/dat01.xlsx&quot;</span>)</span>
<span id="cb163-5"><a href="r语言ggplot2折线图.html#cb163-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-6"><a href="r语言ggplot2折线图.html#cb163-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb163-7"><a href="r语言ggplot2折线图.html#cb163-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-194-1.png" width="672" /></p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="r语言ggplot2折线图.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>dat01,<span class="fu">aes</span>(<span class="at">x=</span>var1,<span class="at">y=</span>var2))<span class="sc">+</span></span>
<span id="cb164-2"><a href="r语言ggplot2折线图.html#cb164-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>(<span class="at">fill=</span><span class="st">&quot;red&quot;</span>,<span class="at">color=</span><span class="st">&quot;blue&quot;</span>,<span class="at">alpha=</span><span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-194-2.png" width="672" /></p>
</div>
<div id="实际例子-1" class="section level2" number="6.6">
<h2><span class="header-section-number">6.6</span> 实际例子</h2>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="r语言ggplot2折线图.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pacman)</span></code></pre></div>
<pre><code>## Warning: package &#39;pacman&#39; was built under R version 4.0.5</code></pre>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="r语言ggplot2折线图.html#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">p_load</span>(tidyverse, showtext, ggtext)</span>
<span id="cb167-2"><a href="r语言ggplot2折线图.html#cb167-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-3"><a href="r语言ggplot2折线图.html#cb167-3" aria-hidden="true" tabindex="-1"></a><span class="co">#eurovision_raw &lt;- readr::read_csv(&#39;https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-05-17/eurovision.csv&#39;)</span></span>
<span id="cb167-4"><a href="r语言ggplot2折线图.html#cb167-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-5"><a href="r语言ggplot2折线图.html#cb167-5" aria-hidden="true" tabindex="-1"></a><span class="co">#readr::write_csv(eurovision_raw,file = &quot;eurovision_raw.csv&quot;)</span></span>
<span id="cb167-6"><a href="r语言ggplot2折线图.html#cb167-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-7"><a href="r语言ggplot2折线图.html#cb167-7" aria-hidden="true" tabindex="-1"></a>eurovision_raw <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">&quot;example_data/06-lineplot/eurovision_raw.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 2005 Columns: 18
## -- Column specification ---------------------------------------------------------------------
## Delimiter: &quot;,&quot;
## chr (12): event, host_city, host_country, event_url, section, artist, song, artist_url, i...
## dbl  (4): year, running_order, total_points, rank
## lgl  (2): qualified, winner
## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="r语言ggplot2折线图.html#cb169-1" aria-hidden="true" tabindex="-1"></a>eurovision <span class="ot">&lt;-</span> eurovision_raw <span class="sc">%&gt;%</span> </span>
<span id="cb169-2"><a href="r语言ggplot2折线图.html#cb169-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2005</span>, section <span class="sc">==</span> <span class="st">&quot;grand-final&quot;</span>) <span class="co"># This is the first year where the &#39;grand-final&#39; happens</span></span>
<span id="cb169-3"><a href="r语言ggplot2折线图.html#cb169-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-4"><a href="r语言ggplot2折线图.html#cb169-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Analysis ----------------------------------------------------------------</span></span>
<span id="cb169-5"><a href="r语言ggplot2折线图.html#cb169-5" aria-hidden="true" tabindex="-1"></a>highest_scores_by_rank <span class="ot">&lt;-</span> eurovision <span class="sc">%&gt;%</span> </span>
<span id="cb169-6"><a href="r语言ggplot2折线图.html#cb169-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rank <span class="sc">&lt;=</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb169-7"><a href="r语言ggplot2折线图.html#cb169-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rank) <span class="sc">%&gt;%</span> </span>
<span id="cb169-8"><a href="r语言ggplot2折线图.html#cb169-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(total_points, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb169-9"><a href="r语言ggplot2折线图.html#cb169-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb169-10"><a href="r语言ggplot2折线图.html#cb169-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, artist_country, total_points)</span>
<span id="cb169-11"><a href="r语言ggplot2折线图.html#cb169-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-12"><a href="r语言ggplot2折线图.html#cb169-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Margin between 1st and 2nd</span></span>
<span id="cb169-13"><a href="r语言ggplot2折线图.html#cb169-13" aria-hidden="true" tabindex="-1"></a>eurovision <span class="sc">%&gt;%</span> </span>
<span id="cb169-14"><a href="r语言ggplot2折线图.html#cb169-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(rank, total_points, year) <span class="sc">%&gt;%</span> </span>
<span id="cb169-15"><a href="r语言ggplot2折线图.html#cb169-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rank <span class="sc">&lt;=</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb169-16"><a href="r语言ggplot2折线图.html#cb169-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb169-17"><a href="r语言ggplot2折线图.html#cb169-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(rank) <span class="sc">%&gt;%</span> </span>
<span id="cb169-18"><a href="r语言ggplot2折线图.html#cb169-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">margin =</span> total_points <span class="sc">-</span> <span class="fu">lag</span>(total_points)) <span class="sc">%&gt;%</span> </span>
<span id="cb169-19"><a href="r语言ggplot2折线图.html#cb169-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb169-20"><a href="r语言ggplot2折线图.html#cb169-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rank <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb169-21"><a href="r语言ggplot2折线图.html#cb169-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_min</span>(margin, <span class="at">n =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 4
##    rank total_points  year margin
##   &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1     2          218  2009   -169</code></pre>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="r语言ggplot2折线图.html#cb171-1" aria-hidden="true" tabindex="-1"></a>eurovision <span class="sc">%&gt;%</span> </span>
<span id="cb171-2"><a href="r语言ggplot2折线图.html#cb171-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rank =</span> <span class="fu">factor</span>(rank)) <span class="sc">%&gt;%</span> </span>
<span id="cb171-3"><a href="r语言ggplot2折线图.html#cb171-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, total_points, <span class="at">group =</span> rank, <span class="at">color =</span> rank)) <span class="sc">+</span></span>
<span id="cb171-4"><a href="r语言ggplot2折线图.html#cb171-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> eurovision <span class="sc">%&gt;%</span> <span class="fu">filter</span>(rank <span class="sc">&gt;</span> <span class="dv">3</span>), <span class="at">color =</span> <span class="st">&quot;grey75&quot;</span>, <span class="at">size =</span> .<span class="dv">25</span>, <span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb171-5"><a href="r语言ggplot2折线图.html#cb171-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> eurovision <span class="sc">%&gt;%</span> <span class="fu">filter</span>(rank <span class="sc">==</span> <span class="dv">3</span>), <span class="at">color =</span> <span class="st">&quot;#0FB5AE&quot;</span>, <span class="at">size =</span> .<span class="dv">75</span>) <span class="sc">+</span></span>
<span id="cb171-6"><a href="r语言ggplot2折线图.html#cb171-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> eurovision <span class="sc">%&gt;%</span> <span class="fu">filter</span>(rank <span class="sc">==</span> <span class="dv">2</span>), <span class="at">color =</span> <span class="st">&quot;#4046CA&quot;</span>, <span class="at">size =</span> .<span class="dv">75</span>) <span class="sc">+</span></span>
<span id="cb171-7"><a href="r语言ggplot2折线图.html#cb171-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> eurovision <span class="sc">%&gt;%</span> <span class="fu">filter</span>(rank <span class="sc">==</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">&quot;#F68511&quot;</span>, <span class="at">size =</span> .<span class="dv">75</span>) <span class="sc">+</span></span>
<span id="cb171-8"><a href="r语言ggplot2折线图.html#cb171-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> eurovision <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2017</span>, rank <span class="sc">==</span> <span class="dv">1</span>), </span>
<span id="cb171-9"><a href="r语言ggplot2折线图.html#cb171-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;#F68511&quot;</span> , <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb171-10"><a href="r语言ggplot2折线图.html#cb171-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> eurovision <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2009</span>, rank <span class="sc">==</span> <span class="dv">1</span>), </span>
<span id="cb171-11"><a href="r语言ggplot2折线图.html#cb171-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;#F68511&quot;</span> , <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb171-12"><a href="r语言ggplot2折线图.html#cb171-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> eurovision <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2009</span>, rank <span class="sc">==</span> <span class="dv">2</span>), </span>
<span id="cb171-13"><a href="r语言ggplot2折线图.html#cb171-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;#4046CA&quot;</span> , <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb171-14"><a href="r语言ggplot2折线图.html#cb171-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">&quot;segment&quot;</span>, <span class="at">x =</span> <span class="dv">2009</span>, <span class="at">xend =</span> <span class="dv">2009</span>, </span>
<span id="cb171-15"><a href="r语言ggplot2折线图.html#cb171-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> <span class="dv">218</span> <span class="sc">+</span> <span class="dv">169</span>, <span class="at">yend =</span> <span class="dv">218</span>, <span class="at">size =</span> .<span class="dv">1</span>, <span class="at">color =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb171-16"><a href="r语言ggplot2折线图.html#cb171-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="dv">2017</span>, <span class="at">y =</span> highest_scores_by_rank<span class="sc">$</span>total_points[<span class="dv">1</span>] <span class="sc">+</span> <span class="dv">30</span>, </span>
<span id="cb171-17"><a href="r语言ggplot2折线图.html#cb171-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> highest_scores_by_rank<span class="sc">$</span>total_points[<span class="dv">1</span>], <span class="at">hjust =</span> .<span class="dv">5</span>,</span>
<span id="cb171-18"><a href="r语言ggplot2折线图.html#cb171-18" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&quot;#F68511&quot;</span>, <span class="at">family =</span> <span class="st">&quot;serif&quot;</span>, <span class="at">fontface =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb171-19"><a href="r语言ggplot2折线图.html#cb171-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fl">2009.1</span>, <span class="at">y =</span> <span class="dv">218</span> <span class="sc">+</span> <span class="dv">169</span> <span class="sc">+</span> <span class="dv">30</span>, <span class="at">label =</span> <span class="dv">218</span> <span class="sc">+</span> <span class="dv">169</span>, </span>
<span id="cb171-20"><a href="r语言ggplot2折线图.html#cb171-20" aria-hidden="true" tabindex="-1"></a>           <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;#F68511&quot;</span>, <span class="at">family =</span> <span class="st">&quot;serif&quot;</span>, <span class="at">fontface =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb171-21"><a href="r语言ggplot2折线图.html#cb171-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="at">x =</span> <span class="fl">2009.1</span>, <span class="at">y =</span> <span class="dv">218</span> <span class="sc">+</span> <span class="dv">30</span>, <span class="at">label =</span> <span class="dv">218</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;#4046CA&quot;</span>, </span>
<span id="cb171-22"><a href="r语言ggplot2折线图.html#cb171-22" aria-hidden="true" tabindex="-1"></a>           <span class="at">family =</span> <span class="st">&quot;serif&quot;</span>, <span class="at">fontface =</span> <span class="st">&quot;bold&quot;</span>, <span class="at">size =</span> <span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb171-23"><a href="r语言ggplot2折线图.html#cb171-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb171-24"><a href="r语言ggplot2折线图.html#cb171-24" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">800</span>)) <span class="sc">+</span></span>
<span id="cb171-25"><a href="r语言ggplot2折线图.html#cb171-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_family =</span> <span class="st">&quot;serif&quot;</span>) <span class="sc">+</span></span>
<span id="cb171-26"><a href="r语言ggplot2折线图.html#cb171-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb171-27"><a href="r语言ggplot2折线图.html#cb171-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Total points&quot;</span>,</span>
<span id="cb171-28"><a href="r语言ggplot2折线图.html#cb171-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;EUROVISION points are trending upwards&quot;</span>,</span>
<span id="cb171-29"><a href="r语言ggplot2折线图.html#cb171-29" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;The upward gradual trend reflects that countries need more points to come &lt;span style=&#39;color:#F68511&#39;&gt;**first**&lt;/span&gt;, &lt;span style=&#39;color:#4046CA&#39;&gt;**second**&lt;/span&gt;, and &lt;span style=&#39;color:#0FB5AE&#39;&gt;**third**&lt;/span&gt;&lt;br&gt;with each new edition&quot;</span>,</span>
<span id="cb171-30"><a href="r语言ggplot2折线图.html#cb171-30" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Visualization by Pablo Alvarez | Data from Eurovision&quot;</span></span>
<span id="cb171-31"><a href="r语言ggplot2折线图.html#cb171-31" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb171-32"><a href="r语言ggplot2折线图.html#cb171-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb171-33"><a href="r语言ggplot2折线图.html#cb171-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="fu">rep</span>(<span class="dv">10</span>, <span class="dv">4</span>)),</span>
<span id="cb171-34"><a href="r语言ggplot2折线图.html#cb171-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb171-35"><a href="r语言ggplot2折线图.html#cb171-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">size =</span> .<span class="dv">15</span>, <span class="at">color =</span> <span class="st">&quot;grey75&quot;</span>),</span>
<span id="cb171-36"><a href="r语言ggplot2折线图.html#cb171-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;grey90&quot;</span>, <span class="at">color =</span> <span class="st">&quot;grey90&quot;</span>),</span>
<span id="cb171-37"><a href="r语言ggplot2折线图.html#cb171-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;grey90&quot;</span>, <span class="at">color =</span> <span class="st">&quot;grey90&quot;</span>),</span>
<span id="cb171-38"><a href="r语言ggplot2折线图.html#cb171-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> .<span class="dv">99</span>, <span class="at">size =</span> <span class="fl">16.5</span>, <span class="at">color =</span> <span class="st">&quot;grey25&quot;</span>),</span>
<span id="cb171-39"><a href="r语言ggplot2折线图.html#cb171-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">color =</span> <span class="st">&quot;grey15&quot;</span>),</span>
<span id="cb171-40"><a href="r语言ggplot2折线图.html#cb171-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">color =</span> <span class="st">&quot;grey50&quot;</span>), </span>
<span id="cb171-41"><a href="r语言ggplot2折线图.html#cb171-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;grey75&quot;</span>, <span class="at">size =</span> .<span class="dv">15</span>),</span>
<span id="cb171-42"><a href="r语言ggplot2折线图.html#cb171-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">32</span>,</span>
<span id="cb171-43"><a href="r语言ggplot2折线图.html#cb171-43" aria-hidden="true" tabindex="-1"></a>                              <span class="at">color =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb171-44"><a href="r语言ggplot2折线图.html#cb171-44" aria-hidden="true" tabindex="-1"></a>                              <span class="at">family =</span> <span class="st">&quot;serif&quot;</span>,</span>
<span id="cb171-45"><a href="r语言ggplot2折线图.html#cb171-45" aria-hidden="true" tabindex="-1"></a>                              <span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb171-46"><a href="r语言ggplot2折线图.html#cb171-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_markdown</span>(<span class="at">size =</span> <span class="dv">16</span>,</span>
<span id="cb171-47"><a href="r语言ggplot2折线图.html#cb171-47" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">color =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb171-48"><a href="r语言ggplot2折线图.html#cb171-48" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">family =</span> <span class="st">&quot;serif&quot;</span>,</span>
<span id="cb171-49"><a href="r语言ggplot2折线图.html#cb171-49" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb171-50"><a href="r语言ggplot2折线图.html#cb171-50" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">20</span>, <span class="at">t =</span> <span class="dv">1</span>),</span>
<span id="cb171-51"><a href="r语言ggplot2折线图.html#cb171-51" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">lineheight =</span> .<span class="dv">35</span>),</span>
<span id="cb171-52"><a href="r语言ggplot2折线图.html#cb171-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>,</span>
<span id="cb171-53"><a href="r语言ggplot2折线图.html#cb171-53" aria-hidden="true" tabindex="-1"></a>                                <span class="at">color =</span> <span class="st">&quot;grey50&quot;</span>,</span>
<span id="cb171-54"><a href="r语言ggplot2折线图.html#cb171-54" aria-hidden="true" tabindex="-1"></a>                                <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb171-55"><a href="r语言ggplot2折线图.html#cb171-55" aria-hidden="true" tabindex="-1"></a>                                <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">20</span>),</span>
<span id="cb171-56"><a href="r语言ggplot2折线图.html#cb171-56" aria-hidden="true" tabindex="-1"></a>                                <span class="at">lineheight =</span> .<span class="dv">3</span>)</span>
<span id="cb171-57"><a href="r语言ggplot2折线图.html#cb171-57" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## Warning in if (!expand) {: the condition has length &gt; 1 and only the first element will be
## used</code></pre>
<pre><code>## Warning in if (!expand) {: the condition has length &gt; 1 and only the first element will be
## used</code></pre>
<p><img src="bookdownproj_files/figure-html/unnamed-chunk-195-1.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r语言ggplot2箱线图.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="r语言ggplot2饼状图.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/NotebookOFXiaoMing/PracticalHandbookforggplot2/edit/master/06-lineplot.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/NotebookOFXiaoMing/PracticalHandbookforggplot2/blob/master/06-lineplot.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
